---
title: "20251212_周五_反思"
date: "2025-12-12"
category: "日报"
tags: "日报"
img: ""
priority: "0.7"
changefreq: "weekly"
---

# 20251212 日报分类整理

## 一、工作重点
1. 重点关注治理效果，而非过度关注报表

## 二、技术实现与工具使用
1. 主要运行Doris数据分析，Hive执行数据分析相对较慢
2. 通过元数据区分表类型
3. Doris 2.1版本技术方案选择：（todo）
   - 首选 [异步物化视图]：适用于报表查询速度要求高，逻辑为标准聚合/关联的场景
     - 优势：利用单表物化视图透明改写和多表物化视图能力
   - 备选 [Job Scheduler]：适用于简单数据清洗存入新表，或需要特殊ETL处理的场景
     - 特点：不需要自动路由特性
   - 外部调度 (DolphinScheduler/Airflow)：仅适用于任务依赖复杂的场景
     - 适用条件：例如必须等Hive数据同步完成，再跑Doris SQL，再推送到邮件
     - 建议：如果数据已在Doris中，优先使用内部功能

## 三、任务配置与调度
1. 分区保留策略：保留最近90天的数据
2. 任务安排：将任务添加到调度系统

## 四、报表相关
1. 报表展示内容包括：Hive和Hadoop集群
2. 技术实现需求：
   - 方案：使用Doris的异步物化视图进行数据加工，为Grafana展示提供支持
   - 替代方案：开发Java JAR任务，通过JDBC连接Doris执行数据加工逻辑

## 五、代码与工具优化
1. hive2DorisSync优化需求：
    - 数据同步逻辑修复：
     - 解决方案：修改为"先删除指定分区的数据，再往该分区append数据"的方式
## 六、待办事项
1. 实现Doris数据加工方案（优先考虑异步物化视图）
2. 优化hive2DorisSyncSimple JAR包的日志功能
3. 修复Doris数据同步逻辑（解决分区数据被覆盖问题）
4. 实现异构物化视图，用于构建Grafana看板